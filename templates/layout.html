<!doctype html>
<html lang="{{ current_lang or 'ru' }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>{{ BRAND }}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="{{ url_for('static', filename='css/tophire.css') }}" rel="stylesheet">
  <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <style>
    .breath-circle-wrapper {
      width: 120px;
      height: 120px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .breath-circle {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      border: 3px solid #0d6efd;
      opacity: 0.9;
      transition: transform 4s ease-in-out, opacity 0.4s ease-in-out;
      transform: scale(1);
    }
    .breath-circle.inhale {
      transform: scale(1.4);
    }
    .breath-circle.exhale {
      transform: scale(0.8);
      opacity: 0.6;
    }
    .relax-game-area button#relaxTarget {
      transition: top 0.15s ease-out, left 0.15s ease-out;
    }

    .reaction-area {
      height: 150px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      background-color: #f8d7da; /* –∫—Ä–∞—Å–Ω–æ–≤–∞—Ç—ã–π, "–∂–¥–∏—Ç–µ" */
    }
    .reaction-area.ready {
      background-color: #d1ecf1; /* –æ–∂–∏–¥–∞–Ω–∏–µ —Å—Ç–∞—Ä—Ç–∞ */
    }
    .reaction-area.go {
      background-color: #d4edda; /* –∑–µ–ª—ë–Ω—ã–π, –º–æ–∂–Ω–æ –∫–ª–∏–∫–∞—Ç—å */
    }
    .memory-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 0.5rem;
      justify-items: stretch;
    }
    .memory-card {
      height: 60px;
      font-size: 1.1rem;
    }

  </style>

</head>
<body>
<nav class="navbar navbar-expand-lg py-2">
  <div class="container">
    <a class="navbar-brand brand d-flex align-items-center gap-2" href="{{ url_for('main.index') }}">
      <span class="brand-mark">{{ BRAND }}</span>
      <span class="brand-hamster d-none d-sm-inline-flex">
        <!-- From Uiverse.io by Nawsome -->
        <div aria-label="Orange and tan hamster running in a metal wheel"
             role="img"
             class="wheel-and-hamster">
          <div class="wheel"></div>
          <div class="hamster">
            <div class="hamster__body">
              <div class="hamster__head">
                <div class="hamster__ear"></div>
                <div class="hamster__eye"></div>
                <div class="hamster__nose"></div>
              </div>
              <div class="hamster__limb hamster__limb--fr"></div>
              <div class="hamster__limb hamster__limb--fl"></div>
              <div class="hamster__limb hamster__limb--br"></div>
              <div class="hamster__limb hamster__limb--bl"></div>
              <div class="hamster__tail"></div>
            </div>
          </div>
          <div class="spoke"></div>
        </div>
      </span>
    </a>
    {% if g.user %}
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="nav">
      <ul class="navbar-nav nav-main ms-4 me-auto align-items-lg-center gap-lg-1">
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('jobs.jobs') }}">
            {{ "–í–∞–∫–∞–Ω—Å—ñ—ó" if current_lang=="uk" else "–í–∞–∫–∞–Ω—Å–∏–∏" }}
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('candidates.candidates') }}">
            {{ "–ö–∞–Ω–¥–∏–¥–∞—Ç–∏" if current_lang=="uk" else "–ö–∞–Ω–¥–∏–¥–∞—Ç—ã" }}
          </a>
        </li>
        {% if g.user.role in ['recruiter','coordinator','director'] %}
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('main.my_partners') }}">
            {{ "–ú–æ—ó –ø–∞—Ä—Ç–Ω–µ—Ä–∏" if current_lang=="uk" else "–ú–æ–∏ –ø–∞—Ä—Ç–Ω—ë—Ä—ã" }}
          </a>
        </li>
        {% endif %}
        {# –ë–ª–æ–∫ –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤: —Å–æ–±–∏—Ä–∞–µ–º –≤ –æ–¥–∏–Ω –¥—Ä–æ–ø–¥–∞—É–Ω #}
        {% if g.user.role in ['recruiter','coordinator','director','finance'] %}
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navFinance" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            {{ "–§—ñ–Ω–∞–Ω—Å–∏" if current_lang=="uk" else "–§–∏–Ω–∞–Ω—Å—ã" }}
          </a>
          <ul class="dropdown-menu" aria-labelledby="navFinance">
            <li>
              <a class="dropdown-item" href="{{ url_for('finance.finance_dashboard') }}">
                {{ "–ü–∞–Ω–µ–ª—å" if current_lang=="uk" else "–ü–∞–Ω–µ–ª—å" }}
              </a>
            </li>
            <li>
              <a class="dropdown-item" href="{{ url_for('finance.finance_partners') }}">
                {{ "–ü–∞—Ä—Ç–Ω–µ—Ä–∏ / –≤–∏–ø–ª–∞—Ç–∏" if current_lang=="uk" else "–ü–∞—Ä—Ç–Ω—ë—Ä—ã / –≤—ã–ø–ª–∞—Ç—ã" }}
              </a>
            </li>
            <li>
              <a class="dropdown-item" href="{{ url_for('finance.finance_payments') }}">
                {{ "–ö –≤–∏–ø–ª–∞—Ç—ñ" if current_lang=="uk" else "–ö –≤—ã–ø–ª–∞—Ç–µ" }}
              </a>
            </li>
            <li>
              <a class="dropdown-item" href="{{ url_for('finance.finance_history') }}">
                {{ "–Ü—Å—Ç–æ—Ä—ñ—è –≤–∏–ø–ª–∞—Ç" if current_lang=="uk" else "–ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–ª–∞—Ç" }}
              </a>
            </li>
            {% if g.user.role in ['recruiter','coordinator','director'] %}
            <li>
              <a class="dropdown-item" href="{{ url_for('finance.confirm_month') }}">
                {{ "–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –º—ñ—Å—è—Ü—è" if current_lang=="uk" else "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –º–µ—Å—è—Ü–∞" }}
                {% if g.confirm_month_count %}
                  <span class="badge text-bg-danger ms-1">{{ g.confirm_month_count }}</span>
                {% endif %}
              </a>
            </li>
            <li>
              <a class="dropdown-item" href="{{ url_for('finance.reports') }}">
                {{ "–ó–≤—ñ—Ç–∏" if current_lang=="uk" else "–û—Ç—á—ë—Ç—ã" }}
              </a>
            </li>
            {% endif %}
            {% if g.user.role in ['coordinator','director'] %}
            <li>
              <a class="dropdown-item" href="{{ url_for('main.analytics') }}">
                –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ / –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
              </a>
            </li>
            {% endif %}
          </ul>
        </li>
        {% endif %}

        <li class="nav-item">
          <a class="nav-link nav-link-icon-label" href="/relax">
            <span class="nav-icon">üåø</span>
            <span class="nav-link-label">Relax</span>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link nav-link-icon-label" href="{{ url_for('training.index') }}">
            <span class="nav-icon">üéì</span>
            <span class="nav-link-label">{{ "–ù–∞–≤—á–∞–Ω–Ω—è" if current_lang=="uk" else "–û–±—É—á–µ–Ω–∏–µ" }}</span>
          </a>
        </li>

{# –ë–ª–æ–∫ –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤: —Ç–æ–∂–µ –¥—Ä–æ–ø–¥–∞—É–Ω, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å –≤–µ—Ä—Ö–Ω—é—é —Å—Ç—Ä–æ–∫—É #}
        {% if g.user.role == 'partner' %}
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle nav-link-with-badge" href="#" id="navPartner" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            {{ "–ü–∞—Ä—Ç–Ω–µ—Ä—É" if current_lang=="uk" else "–ü–∞—Ä—Ç–Ω—ë—Ä—É" }}
            {% if g.partner_profile_incomplete %}
              <span class="nav-badge nav-badge-danger" title="–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å –ø–∞—Ä—Ç–Ω—ë—Ä–∞">!</span>
            {% endif %}
          </a>
          <ul class="dropdown-menu" aria-labelledby="navPartner">
            {% if g.partner_profile_incomplete %}
            <li>
              <a class="dropdown-item text-danger fw-bold" href="{{ url_for('partner.partner_profile') }}">
                ‚ö† {{ "–ó–∞–ø–æ–≤–Ω—ñ—Ç—å –ø—Ä–æ—Ñ—ñ–ª—å (–¥–∞–Ω—ñ –¥–ª—è –≤–∏–ø–ª–∞—Ç)" if current_lang=="uk" else "–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å (–¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—ã–ø–ª–∞—Ç)" }}
              </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            {% endif %}
            <li>
              <a class="dropdown-item" href="{{ url_for('partner.partner_profile') }}">
                {{ "–ú—ñ–π –ø—Ä–æ—Ñ—ñ–ª—å" if current_lang=="uk" else "–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å" }}
              </a>
            </li>
            <li>
              <a class="dropdown-item" href="{{ url_for('partner.partner_earnings') }}">
                {{ "–ú–æ—ó –≤–∏–ø–ª–∞—Ç–∏" if current_lang=="uk" else "–ú–æ–∏ –≤—ã–ø–ª–∞—Ç—ã" }}
              </a>
            </li>
            <li>
              <a class="dropdown-item" href="{{ url_for('partner.partner_payouts') }}">
                {{ "–Ü—Å—Ç–æ—Ä—ñ—è –≤–∏–ø–ª–∞—Ç" if current_lang=="uk" else "–ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–ª–∞—Ç" }}
              </a>
            </li>
            <li>
              <a class="dropdown-item" href="{{ url_for('partner.partner_reports') }}">
                {{ "–ú–æ—ó –∑–≤—ñ—Ç–∏" if current_lang=="uk" else "–ú–æ–∏ –æ—Ç—á—ë—Ç—ã" }}
              </a>
            </li>
            <li>
              <a class="dropdown-item" href="{{ url_for('partner.partner_help') }}">
                {{ "–Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è / Relax" if current_lang=="uk" else "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è / Relax" }}
              </a>
            </li>
          </ul>
        </li>
        {% endif %}

{# –ê–¥–º–∏–Ω–∫–∞ –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–∞ #}
        {% if g.user.role in ['coordinator','director'] %}
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('admin.admin_users') }}">
            {{ "–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ" if current_lang=="uk" else "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏" }}
          </a>
        </li>
        {% endif %}
      
        </ul>

      <div class="navbar-utilities d-flex align-items-center ms-lg-3 mt-3 mt-lg-0 w-100 w-lg-auto justify-content-between justify-content-lg-end">

        <div class="dropdown me-2">
          {% set total_alerts = (g.news_unread_count or 0) + (unread_notifications or 0) + (g.inbox_count or 0) %}
          <button class="btn btn-sm btn-outline-secondary position-relative" type="button"
                  id="navAlertsDropdown" data-bs-toggle="dropdown" aria-expanded="false"
                  title="{{ '–û–ø–æ–≤—ñ—â–µ–Ω–Ω—è —Ç–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è' if current_lang=='uk' else '–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ —Å–æ–æ–±—â–µ–Ω–∏—è' }}">
            <span class="nav-icon">üîî</span>
            {% if total_alerts > 0 %}
              <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                {{ total_alerts }}
              </span>
            {% endif %}
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navAlertsDropdown">
            <li class="dropdown-header small text-muted">
              {{ "–û–ø–æ–≤—ñ—â–µ–Ω–Ω—è" if current_lang=="uk" else "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è" }}
            </li>
            <li>
              <a class="dropdown-item d-flex justify-content-between align-items-center" href="{{ url_for('news.news_list') }}">
                <span>{{ "–ù–æ–≤–∏–Ω–∏" if current_lang=="uk" else "–ù–æ–≤–æ—Å—Ç–∏" }}</span>
                {% if g.news_unread_count %}
                  <span class="badge bg-danger rounded-pill">{{ g.news_unread_count }}</span>
                {% endif %}
              </a>
            </li>
            <li>
              <a class="dropdown-item d-flex justify-content-between align-items-center" href="{{ url_for('notifications.notifications_page') }}">
                <span>{{ "–°–∏—Å—Ç–µ–º–Ω—ñ" if current_lang=="uk" else "–°–∏—Å—Ç–µ–º–Ω—ã–µ" }}</span>
                {% if unread_notifications > 0 %}
                  <span class="badge bg-danger rounded-pill">{{ unread_notifications }}</span>
                {% endif %}
              </a>
            </li>
            {% if g.user.role in ['recruiter','coordinator','director'] %}
            <li>
              <a class="dropdown-item d-flex justify-content-between align-items-center" href="{{ url_for('main.inbox') }}">
                <span>{{ "–í—Ö—ñ–¥–Ω—ñ" if current_lang=="uk" else "–í—Ö–æ–¥—è—â–∏–µ" }}</span>
                {% if g.inbox_count %}
                  <span class="badge bg-danger rounded-pill">{{ g.inbox_count }}</span>
                {% endif %}
              </a>
            </li>
            {% endif %}
          </ul>
        </div>

        <div class="dropdown me-2">
          <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
            {{ "UA" if current_lang=="uk" else "RU" }}
          </button>
          <ul class="dropdown-menu dropdown-menu-end">
            <li>
              <a class="dropdown-item {% if current_lang=='ru' %}active{% endif %}"
                 href="{{ url_for('set_lang', lang='ru', next=request.path) }}">RU</a>
            </li>
            <li>
              <a class="dropdown-item {% if current_lang=='uk' %}active{% endif %}"
                 href="{{ url_for('set_lang', lang='uk', next=request.path) }}">UA</a>
            </li>
          
        </ul>
        </div>

        <div class="navbar-user d-flex align-items-center gap-2 text-muted small flex-grow-1 flex-lg-grow-0">
          <span>
            {{ "–ü—Ä–∏–≤—ñ—Ç" if current_lang=="uk" else "Hi" }}, {{ g.user.name }} ({{ g.user.role }})
          </span>
          {% if g.user.role == 'partner' %}
            {% set tiers = ['Bronze','Silver','Gold','Platinum','Diamond'] %}
            {% set tier = g.user.note if g.user.note in tiers else 'Bronze' %}
            <span class="tier-badge tier-badge-nav tier-{{ tier|lower }}">{{ tier }}</span>
          {% endif %}
        </div>

        <a class="btn btn-sm btn-link text-decoration-none d-none d-md-inline" href="{{ url_for('change_password') }}">
          {{ "–ó–º—ñ–Ω–∏—Ç–∏ –ø–∞—Ä–æ–ª—å" if current_lang=="uk" else "–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å" }}
        </a>

        <a class="btn btn-sm btn-outline-secondary ms-lg-2" href="{{ url_for('logout') }}">
          {{ "–í–∏–π—Ç–∏" if current_lang=="uk" else "–í—ã–π—Ç–∏" }}
        </a>
      </div>
    </div>
    {% endif %}
  </div>
</nav>


<main class="container pb-5">
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="mb-3">
        {% for category, msg in messages %}
          <div class="alert alert-{{ 'success' if category=='success' else ('danger' if category=='danger' else 'secondary') }} alert-dismissible fade show" role="alert">
            {{ msg }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}
  {% block content %}{% endblock %}
</main>


{% if g.user %}
<div class="bottom-toast toast-hidden" id="appreciationToast">
  <div class="toast-card">
    <svg class="toast-wave" viewBox="0 0 1440 320" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M0,256L11.4,240C22.9,224,46,192,69,192C91.4,192,114,224,137,234.7C160,245,183,235,206,213.3C228.6,192,251,160,274,149.3C297.1,139,320,149,343,181.3C365.7,213,389,267,411,282.7C434.3,299,457,277,480,250.7C502.9,224,526,192,549,181.3C571.4,171,594,181,617,208C640,235,663,277,686,256C708.6,235,731,149,754,122.7C777.1,96,800,128,823,165.3C845.7,203,869,245,891,224C914.3,203,937,117,960,112C982.9,107,1006,181,1029,197.3C1051.4,213,1074,171,1097,144C1120,117,1143,107,1166,133.3C1188.6,160,1211,224,1234,218.7C1257.1,213,1280,139,1303,133.3C1325.7,128,1349,192,1371,192C1394.3,192,1417,128,1429,96L1440,64L1440,320L1428.6,320C1417.1,320,1394,320,1371,320C1348.6,320,1326,320,1303,320C1280,320,1257,320,1234,320C1211.4,320,1189,320,1166,320C1142.9,320,1120,320,1097,320C1074.3,320,1051,320,1029,320C1005.7,320,983,320,960,320C937.1,320,914,320,891,320C868.6,320,846,320,823,320C800,320,777,320,754,320C731.4,320,709,320,686,320C662.9,320,640,320,617,320C594.3,320,571,320,549,320C525.7,320,503,320,480,320C457.1,320,434,320,411,320C388.6,320,366,320,343,320C320,320,297,320,274,320C251.4,320,229,320,206,320C182.9,320,160,320,137,320C114.3,320,91,320,69,320C45.7,320,23,320,11,320L0,320Z"
        fill-opacity="1"
      ></path>
    </svg>

    <div class="toast-icon-container">
      <svg xmlns="http://www.w3.org/2000/svg"
           viewBox="0 0 24 24"
           stroke-width="0"
           fill="currentColor"
           stroke="currentColor"
           class="toast-icon">
        <path d="M13 7.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm-3 3.75a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 .75.75v4.25h.75a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1 0-1.5h.75V12h-.75a.75.75 0 0 1-.75-.75Z"></path>
        <path d="M12 1c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1ZM2.5 12a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5A9.5 9.5 0 0 0 12 2.5 9.5 9.5 0 0 0 2.5 12Z"></path>
      </svg>
    </div>

    <div class="toast-message-text-container">
      <p class="toast-message-text" id="toastMessageMain">
        {% if current_lang=="uk" %}
          –î—è–∫—É—î–º–æ, —â–æ –ø—Ä–∞—Ü—é—î—Ç–µ –∑ –Ω–∞–º–∏. –ú–∏ —Ü—ñ–Ω—É—î–º–æ –∫–æ–∂–Ω–æ–≥–æ –∑ –≤–∞—Å!
        {% else %}
          –°–ø–∞—Å–∏–±–æ, —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å –Ω–∞–º–∏. –ú—ã —Ü–µ–Ω–∏–º –∫–∞–∂–¥–æ–≥–æ –∏–∑ –≤–∞—Å!
        {% endif %}
      </p>
      <p class="toast-sub-text">{{ BRAND }}</p>
    </div>

    <svg xmlns="http://www.w3.org/2000/svg"
         viewBox="0 0 15 15"
         stroke-width="0"
         fill="none"
         stroke="currentColor"
         class="toast-cross-icon">
      <path
        fill="currentColor"
        d="M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z"
        clip-rule="evenodd"
        fill-rule="evenodd"
      ></path>
    </svg>
  </div>
</div>


<script>
  document.addEventListener("DOMContentLoaded", function () {
    var toast = document.getElementById("appreciationToast");
    if (!toast) return;

    var textEl = document.getElementById("toastMessageMain");
    var lang = "{{ current_lang or 'ru' }}";

    var phrases = {
      ru: [
        "–°–ø–∞—Å–∏–±–æ, —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å –Ω–∞–º–∏. –ú—ã —Ü–µ–Ω–∏–º –∫–∞–∂–¥–æ–≥–æ –∏–∑ –≤–∞—Å!",
        "–í–∞—à–∏ –∫–∞–Ω–¥–∏–¥–∞—Ç—ã ‚Äî –Ω–∞—à–∞ –æ–±—â–∞—è –ø–æ–±–µ–¥–∞. –°–ø–∞—Å–∏–±–æ –∑–∞ –ø–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–æ.",
        "–í–º–µ—Å—Ç–µ –º—ã –¥–∞—ë–º –ª—é–¥—è–º —Ä–∞–±–æ—Ç—É –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å. –°–ø–∞—Å–∏–±–æ, —á—Ç–æ –≤—ã —Å –Ω–∞–º–∏.",
        "–í—ã –¥–µ–ª–∞–µ—Ç–µ —Ä—ã–Ω–æ–∫ —á–µ—Å—Ç–Ω–µ–µ –∏ —Å–∏–ª—å–Ω–µ–µ. –ù–∞–º –≤–∞–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Ä—è–¥–æ–º —Å –≤–∞–º–∏.",
        "–°–ø–∞—Å–∏–±–æ –∑–∞ –¥–æ–≤–µ—Ä–∏–µ –∫ TopHire. –ú—ã –≤—Å–µ–≥–¥–∞ –Ω–∞ –≤–∞—à–µ–π —Å—Ç–æ—Ä–æ–Ω–µ.",
        "–ö–∞–∂–¥—ã–π —Å—Ç–∞—Ä—Ç ‚Äî —ç—Ç–æ —á—å—è-—Ç–æ –Ω–æ–≤–∞—è –∏—Å—Ç–æ—Ä–∏—è. –°–ø–∞—Å–∏–±–æ, —á—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –∏—Ö.",
        "–í–∞—à –≤–∫–ª–∞–¥ –≤ –∫–æ–º–∞–Ω–¥—É –±–µ—Å—Ü–µ–Ω–µ–Ω. –ú—ã –≤–∏–¥–∏–º —ç—Ç–æ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.",
        "–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à—É –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∏ –≤–Ω–∏–º–∞–Ω–∏–µ –∫ –ª—é–¥—è–º.",
        "–° –≤–∞–º–∏ —Ä–µ–∫—Ä—É—Ç–∏–Ω–≥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–æ—â–µ –∏ —á–µ–ª–æ–≤–µ—á–Ω–µ–µ. –ú—ã —ç—Ç–æ —Ü–µ–Ω–∏–º.",
        "–í—ã ‚Äî –∫–ª—é—á–µ–≤–∞—è —á–∞—Å—Ç—å –Ω–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã. –°–ø–∞—Å–∏–±–æ, —á—Ç–æ –≤—ã–±–∏—Ä–∞–µ—Ç–µ –Ω–∞—Å.",
        "–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à—É —Å–∫–æ—Ä–æ—Å—Ç—å, —á–µ—Å—Ç–Ω–æ—Å—Ç—å –∏ –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å –≤ —Ä–∞–±–æ—Ç–µ.",
        "–ú—ã –∑–∞–º–µ—á–∞–µ–º –∫–∞–∂–¥—ã–π –≤–∞—à —Å—Ç–∞—Ä—Ç –∏ –∫–∞–∂–¥–æ–µ —É—Å–∏–ª–∏–µ. –ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –≤–∞—Å.",
        "–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç–µ –ª—é–¥—è–º –Ω–∞—Ö–æ–¥–∏—Ç—å —Å–≤–æ—ë –º–µ—Å—Ç–æ –≤ –ü–æ–ª—å—à–µ.",
        "–° –≤–∞–º–∏ –º—ã –º–æ–∂–µ–º –±–æ–ª—å—à–µ. –°–ø–∞—Å–∏–±–æ –∑–∞ –Ω–∞–¥—ë–∂–Ω–æ–µ –ø–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–æ.",
        "–í—ã ‚Äî –Ω–∞—à–∞ —Å–∏–ª–∞ –Ω–∞ —Ä—ã–Ω–∫–µ. –°–ø–∞—Å–∏–±–æ, —á—Ç–æ –æ—Å—Ç–∞—ë—Ç–µ—Å—å —Å –Ω–∞–º–∏."
      ],
      uk: [
        "–î—è–∫—É—î–º–æ, —â–æ –ø—Ä–∞—Ü—é—î—Ç–µ –∑ –Ω–∞–º–∏. –ú–∏ —Ü—ñ–Ω—É—î–º–æ –∫–æ–∂–Ω–æ–≥–æ –∑ –≤–∞—Å!",
        "–í–∞—à—ñ –∫–∞–Ω–¥–∏–¥–∞—Ç–∏ ‚Äî –Ω–∞—à–∞ —Å–ø—ñ–ª—å–Ω–∞ –ø–µ—Ä–µ–º–æ–≥–∞. –î—è–∫—É—î–º–æ –∑–∞ –ø–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–æ.",
        "–†–∞–∑–æ–º –º–∏ –¥–∞—î–º–æ –ª—é–¥—è–º —Ä–æ–±–æ—Ç—É —Ç–∞ —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å. –î—è–∫—É—î–º–æ, —â–æ –≤–∏ –∑ –Ω–∞–º–∏.",
        "–í–∏ —Ä–æ–±–∏—Ç–µ —Ä–∏–Ω–æ–∫ —á–µ—Å–Ω—ñ—à–∏–º —ñ —Å–∏–ª—å–Ω—ñ—à–∏–º. –ù–∞–º –≤–∞–∂–ª–∏–≤–æ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –ø–æ—Ä—É—á –∑ –≤–∞–º–∏.",
        "–î—è–∫—É—î–º–æ –∑–∞ –¥–æ–≤—ñ—Ä—É –¥–æ TopHire. –ú–∏ –∑–∞–≤–∂–¥–∏ –Ω–∞ –≤–∞—à–æ–º—É –±–æ—Ü—ñ.",
        "–ö–æ–∂–µ–Ω —Å—Ç–∞—Ä—Ç ‚Äî —Ü–µ —á–∏—è—Å—å –Ω–æ–≤–∞ —ñ—Å—Ç–æ—Ä—ñ—è. –î—è–∫—É—î–º–æ, —â–æ –∑–∞–ø—É—Å–∫–∞—î—Ç–µ —ó—Ö.",
        "–í–∞—à –≤–Ω–µ—Å–æ–∫ —É –∫–æ–º–∞–Ω–¥—É –±–µ–∑—Ü—ñ–Ω–Ω–∏–π. –ú–∏ –±–∞—á–∏–º–æ —Ü–µ —â–æ–¥–Ω—è.",
        "–î—è–∫—É—î–º–æ –∑–∞ –≤–∞—à—É –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å —Ç–∞ —É–≤–∞–≥—É –¥–æ –ª—é–¥–µ–π.",
        "–ó –≤–∞–º–∏ —Ä–µ–∫—Ä—É—Ç–∏–Ω–≥ —Å—Ç–∞—î –ø—Ä–æ—Å—Ç—ñ—à–∏–º —ñ –±—ñ–ª—å—à –ª—é–¥—è–Ω–∏–º. –ú–∏ —Ü–µ —Ü—ñ–Ω—É—î–º–æ.",
        "–í–∏ ‚Äî –∫–ª—é—á–æ–≤–∞ —á–∞—Å—Ç–∏–Ω–∞ –Ω–∞—à–æ—ó —Å–∏—Å—Ç–µ–º–∏. –î—è–∫—É—î–º–æ, —â–æ –æ–±–∏—Ä–∞—î—Ç–µ –Ω–∞—Å.",
        "–î—è–∫—É—î–º–æ –∑–∞ –≤–∞—à—É —à–≤–∏–¥–∫—ñ—Å—Ç—å, —á–µ—Å–Ω—ñ—Å—Ç—å —Ç–∞ –≤—ñ–¥–∫—Ä–∏—Ç—ñ—Å—Ç—å —É —Ä–æ–±–æ—Ç—ñ.",
        "–ú–∏ –ø–æ–º—ñ—á–∞—î–º–æ –∫–æ–∂–µ–Ω —Å—Ç–∞—Ä—Ç —ñ –∫–æ–∂–Ω–µ –∑—É—Å–∏–ª–ª—è. –©–∏—Ä–æ –¥—è–∫—É—î–º–æ –≤–∞–º.",
        "–î—è–∫—É—î–º–æ, —â–æ –¥–æ–ø–æ–º–∞–≥–∞—î—Ç–µ –ª—é–¥—è–º –∑–Ω–∞—Ö–æ–¥–∏—Ç–∏ —Å–≤–æ—î –º—ñ—Å—Ü–µ –≤ –ü–æ–ª—å—â—ñ.",
        "–ó –≤–∞–º–∏ –º–∏ –º–æ–∂–µ–º–æ –±—ñ–ª—å—à–µ. –î—è–∫—É—î–º–æ –∑–∞ –Ω–∞–¥—ñ–π–Ω–µ –ø–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–æ.",
        "–í–∏ ‚Äî –Ω–∞—à–∞ —Å–∏–ª–∞ –Ω–∞ —Ä–∏–Ω–∫—É. –î—è–∫—É—î–º–æ, —â–æ –∑–∞–ª–∏—à–∞—î—Ç–µ—Å—è –∑ –Ω–∞–º–∏."
      ]
    };

    function pickRandomPhrase() {
      var list = phrases[lang] || phrases["ru"];
      if (!list || !list.length) return "";
      return list[Math.floor(Math.random() * list.length)];
    }

    function showToast() {
      if (!toast) return;
      if (textEl) {
        textEl.textContent = pickRandomPhrase();
      }
      toast.classList.remove("toast-hidden");

      if (toast._hideTimer) {
        clearTimeout(toast._hideTimer);
      }
      // –ü—Ä—è—á–µ–º —Ç–æ—Å—Ç —á–µ—Ä–µ–∑ 10‚Äì15 —Å–µ–∫—É–Ω–¥
      toast._hideTimer = setTimeout(function () {
        toast.classList.add("toast-hidden");
      }, 10000 + Math.random() * 5000);

      // –ó–∞–ø–æ–º–∏–Ω–∞–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–æ–∫–∞–∑–∞ –≤ —ç—Ç–æ–π –≤–∫–ª–∞–¥–∫–µ
      try {
        sessionStorage.setItem("tophire_toast_last_shown", Date.now().toString());
      } catch (e) {}
    }

    var closeIcon = toast.querySelector(".toast-cross-icon");
    if (closeIcon) {
      closeIcon.addEventListener("click", function () {
        toast.classList.add("toast-hidden");
      });
    }

    var now = Date.now();
    var lastShown = 0;
    try {
      var raw = sessionStorage.getItem("tophire_toast_last_shown");
      if (raw) {
        lastShown = parseInt(raw, 10) || 0;
      }
    } catch (e) {
      lastShown = 0;
    }

    var FIVE_MIN = 5 * 60 * 1000;

    if (!lastShown) {
      // –ü–µ—Ä–≤—ã–π –≤–∏–∑–∏—Ç –≤ —ç—Ç–æ–π –≤–∫–ª–∞–¥–∫–µ: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–¥–∏–Ω —Ä–∞–∑ —á–µ—Ä–µ–∑ 2‚Äì5 —Å–µ–∫—É–Ω–¥
      setTimeout(function () {
        showToast();
      }, 2000 + Math.random() * 3000);
    } else {
      var since = now - lastShown;
      if (since >= FIVE_MIN) {
        // –° –ø—Ä–æ—à–ª–æ–≥–æ –ø–æ–∫–∞–∑–∞ –ø—Ä–æ—à–ª–æ 5+ –º–∏–Ω—É—Ç ‚Äî –º–æ–∂–µ–º –ø–æ–∫–∞–∑–∞—Ç—å —Å–Ω–æ–≤–∞
        // –Ω–æ –Ω–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ, –∞ —á–µ—Ä–µ–∑ 5‚Äì30 —Å–µ–∫—É–Ω–¥
        var delay = 5000 + Math.random() * 25000;
        setTimeout(function () {
          showToast();
        }, delay);
      }
      // –ï—Å–ª–∏ –ø—Ä–æ—à–ª–æ –º–µ–Ω—å—à–µ 5 –º–∏–Ω—É—Ç ‚Äî –Ω–∞ —ç—Ç–æ–π –∑–∞–≥—Ä—É–∑–∫–µ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º.
    }
  });
</script>


{% endif %}


<footer class="py-4 mt-5 border-top">
  <div class="container d-flex justify-content-between">
    <span>¬© {{ 2025 }} {{ BRAND }}</span>
    <span class="small-note">{{ "–°—Ç—Ä–∏–º–∞–Ω–∞, –∑—Ä–æ–∑—É–º—ñ–ª–∞ CRM –¥–ª—è —Ä–µ–∫—Ä—É—Ç–∏–Ω–≥—É" if current_lang=="uk" else "–°–¥–µ—Ä–∂–∞–Ω–Ω–∞—è, –ø–æ–Ω—è—Ç–Ω–∞—è CRM –¥–ª—è —Ä–µ–∫—Ä—É—Ç–∏–Ω–≥–∞" }}</span>
  </div>
</footer>

<script>
document.addEventListener("DOMContentLoaded", function () {
  // –ú–∏–Ω–∏-–∏–≥—Ä–∞: –∫–ª–∏–∫ –ø–æ —Å–º–∞–π–ª–∏–∫—É
  var target = document.getElementById("relaxTarget");
  var startBtn = document.getElementById("relaxStartBtn");
  var scoreEl = document.getElementById("relaxScore");
  var timerEl = document.getElementById("relaxTimer");
  var gameArea = document.querySelector(".relax-game-area");
  var gameTimer = null;
  var gameRunning = false;
  var timeLeft = 15;
  var score = 0;

  function placeTarget() {
    if (!gameArea || !target) return;
    var rect = gameArea.getBoundingClientRect();
    var size = 32;
    var maxLeft = rect.width - size - 10;
    var maxTop = rect.height - size - 10;
    var left = Math.random() * maxLeft + 5;
    var top = Math.random() * maxTop + 5;
    target.style.left = left + "px";
    target.style.top = top + "px";
  }

  function resetGame() {
    score = 0;
    timeLeft = 15;
    if (scoreEl) scoreEl.textContent = "0";
    if (timerEl) timerEl.textContent = "15";
    if (target) target.style.display = "none";
  }

  if (startBtn && target && gameArea) {
    startBtn.addEventListener("click", function (e) {
      e.preventDefault();
      if (gameRunning) return;
      gameRunning = true;
      resetGame();
      target.style.display = "inline-block";
      placeTarget();
      gameTimer = setInterval(function () {
        timeLeft -= 1;
        if (timerEl) timerEl.textContent = timeLeft.toString();
        if (timeLeft <= 0) {
          clearInterval(gameTimer);
          gameRunning = false;
          if (target) target.style.display = "none";
        }
      }, 1000);
    });

    target.addEventListener("click", function () {
      if (!gameRunning) return;
      score += 1;
      if (scoreEl) scoreEl.textContent = score.toString();
      placeTarget();
    });
  }


  // –ú–∏–Ω–∏-–∏–≥—Ä–∞ 2: —Ä–µ–∞–∫—Ü–∏—è
  var reactionArea = document.getElementById("reactionArea");
  var reactionStartBtn = document.getElementById("reactionStartBtn");
  var reactionResult = document.getElementById("reactionResult");
  var reactionHint = document.getElementById("reactionHint");
  var reactionTimeout = null;
  var reactionStartTime = null;
  var reactionWaiting = false;
  var reactionReady = false;

  function resetReaction() {
    reactionWaiting = false;
    reactionReady = false;
    reactionStartTime = null;
    if (reactionTimeout) clearTimeout(reactionTimeout);
    if (reactionArea) {
      reactionArea.classList.remove("ready", "go");
      reactionArea.classList.add("border");
    }
    if (reactionHint) {
      reactionHint.textContent = "–ù–∞–∂–º–∏—Ç–µ ¬´–°—Ç–∞—Ä—Ç —Ç–µ—Å—Ç–∞¬ª, –∑–∞—Ç–µ–º –∂–¥–∏—Ç–µ —Ü–≤–µ—Ç.";
    }
  }

  if (reactionStartBtn && reactionArea) {
    resetReaction();
    reactionStartBtn.addEventListener("click", function(e) {
      e.preventDefault();
      resetReaction();
      if (reactionResult) reactionResult.textContent = "‚Äì";
      reactionWaiting = true;
      if (reactionHint) reactionHint.textContent = "–ñ–¥–∏—Ç–µ, –ø–æ–ª–µ —Å—Ç–∞–Ω–µ—Ç –∑–µ–ª—ë–Ω—ã–º...";
      if (reactionArea) {
        reactionArea.classList.remove("go");
        reactionArea.classList.add("ready");
      }
      var delay = 1500 + Math.random() * 3000;
      reactionTimeout = setTimeout(function() {
        if (!reactionWaiting) return;
        reactionWaiting = false;
        reactionReady = true;
        reactionStartTime = performance.now();
        if (reactionArea) {
          reactionArea.classList.remove("ready");
          reactionArea.classList.add("go");
        }
        if (reactionHint) {
          reactionHint.textContent = "–ö–ª–∏–∫–∞–π—Ç–µ!";
        }
      }, delay);
    });

    reactionArea.addEventListener("click", function() {
      if (reactionWaiting) {
        // –°–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ
        resetReaction();
        if (reactionResult) reactionResult.textContent = "—Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ";
        return;
      }
      if (!reactionReady || !reactionStartTime) {
        return;
      }
      var now = performance.now();
      var diff = Math.round(now - reactionStartTime);
      reactionReady = false;
      if (reactionResult) reactionResult.textContent = diff.toString();
      if (reactionHint) reactionHint.textContent = "–ù–∞–∂–º–∏—Ç–µ ¬´–°—Ç–∞—Ä—Ç —Ç–µ—Å—Ç–∞¬ª, —á—Ç–æ–±—ã –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –µ—â—ë —Ä–∞–∑.";
      if (reactionArea) {
        reactionArea.classList.remove("go", "ready");
      }
    });
  }

  // –ú–∏–Ω–∏-–∏–≥—Ä–∞ 3: –ø–∞–º—è—Ç—å
  var memoryCards = document.querySelectorAll(".memory-card");
  var memoryMovesEl = document.getElementById("memoryMoves");
  var memoryMatchesEl = document.getElementById("memoryMatches");
  var memoryRestartBtn = document.getElementById("memoryRestartBtn");
  var memoryValues = ["A","A","B","B"];
  var memoryOpen = [];
  var memoryLocked = false;
  var memoryMoves = 0;
  var memoryMatches = 0;

  function shuffleMemory() {
    for (var i = memoryValues.length - 1; i > 0; i--) {
      var j = Math.floor(Math.random() * (i + 1));
      var tmp = memoryValues[i];
      memoryValues[i] = memoryValues[j];
      memoryValues[j] = tmp;
    }
  }

  function resetMemory() {
    memoryMoves = 0;
    memoryMatches = 0;
    memoryOpen = [];
    memoryLocked = false;
    shuffleMemory();
    if (memoryMovesEl) memoryMovesEl.textContent = "0";
    if (memoryMatchesEl) memoryMatchesEl.textContent = "0";
    if (memoryCards) {
      memoryCards.forEach(function(btn, idx) {
        btn.textContent = "?";
        btn.disabled = false;
        btn.dataset.value = memoryValues[idx];
      });
    }
  }

  if (memoryCards && memoryCards.length) {
    resetMemory();
    memoryCards.forEach(function(btn) {
      btn.addEventListener("click", function() {
        if (memoryLocked) return;
        var index = btn.getAttribute("data-index");
        if (btn.textContent !== "?") return;
        btn.textContent = btn.dataset.value || "?";
        memoryOpen.push(btn);
        if (memoryOpen.length === 2) {
          memoryLocked = true;
          memoryMoves += 1;
          if (memoryMovesEl) memoryMovesEl.textContent = memoryMoves.toString();
          var a = memoryOpen[0];
          var b = memoryOpen[1];
          if ((a.dataset.value || "") === (b.dataset.value || "")) {
            // —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
            memoryMatches += 1;
            if (memoryMatchesEl) memoryMatchesEl.textContent = memoryMatches.toString();
            a.disabled = true;
            b.disabled = true;
            memoryOpen = [];
            memoryLocked = false;
          } else {
            // –Ω–µ —Å–æ–≤–ø–∞–ª–æ
            setTimeout(function() {
              a.textContent = "?";
              b.textContent = "?";
              memoryOpen = [];
              memoryLocked = false;
            }, 700);
          }
        }
      });
    });
  }

  if (memoryRestartBtn) {
    memoryRestartBtn.addEventListener("click", function(e) {
      e.preventDefault();
      resetMemory();
    });
  }

  // –î—ã—Ö–∞–Ω–∏–µ: —Ü–∏–∫–ª –≤–¥–æ—Ö-–∑–∞–¥–µ—Ä–∂–∫–∞-–≤—ã–¥–æ—Ö
  var breathBtn = document.getElementById("breathStartBtn");
  var breathCircle = document.getElementById("breathCircle");
  var breathPhaseEl = document.getElementById("breathPhase");
  var breathTimer = null;
  var phases = [
    { name: "–í–¥–æ—Ö", className: "inhale", duration: 4000 },
    { name: "–ó–∞–¥–µ—Ä–∂–∫–∞", className: "", duration: 4000 },
    { name: "–í—ã–¥–æ—Ö", className: "exhale", duration: 6000 }
  ];
  var currentPhase = 0;
  var breathing = false;

  function setPhase(index) {
    if (!breathCircle || !breathPhaseEl) return;
    var phase = phases[index];
    breathCircle.classList.remove("inhale", "exhale");
    if (phase.className) breathCircle.classList.add(phase.className);
    breathPhaseEl.textContent = phase.name;
  }

  function startBreathing() {
    if (!breathCircle || !breathPhaseEl) return;
    breathing = true;
    currentPhase = 0;
    setPhase(currentPhase);
    if (breathTimer) clearTimeout(breathTimer);

    function next() {
      if (!breathing) return;
      currentPhase = (currentPhase + 1) % phases.length;
      setPhase(currentPhase);
      breathTimer = setTimeout(next, phases[currentPhase].duration);
    }

    breathTimer = setTimeout(next, phases[currentPhase].duration);
  }

  function stopBreathing() {
    breathing = false;
    if (breathTimer) clearTimeout(breathTimer);
    if (breathCircle) {
      breathCircle.classList.remove("inhale", "exhale");
    }
    if (breathPhaseEl) {
      breathPhaseEl.textContent = "–ù–∞–∂–º–∏—Ç–µ ¬´–°—Ç–∞—Ä—Ç¬ª";
    }
  }

  if (breathBtn) {
    breathBtn.addEventListener("click", function (e) {
      e.preventDefault();
      if (!breathing) {
        startBreathing();
      } else {
        stopBreathing();
      }
    });
  }
});
</script>

</body></html>