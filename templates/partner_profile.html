{% extends "layout.html" %}
{% block content %}
<h1 class="hero-title mb-3">Мой профиль (партнёр)</h1>
<div class="row g-3">
  <div class="col-md-6">
    <form method="post" enctype="multipart/form-data" class="card p-3">
      <h5 class="card-title">Платёжные данные</h5>
      <div class="mb-2">
        <label class="form-label small">Название банка</label>
        <input type="text" name="bank_name" value="{{ user.bank_name }}" class="form-control">
      </div>
      <div class="mb-2">
        <label class="form-label small">Номер счёта / IBAN</label>
        <input type="text" name="bank_account" value="{{ user.bank_account }}" class="form-control">
      </div>
      <div class="mb-2">
        <label class="form-label small">Компания</label>
        <input type="text" name="company_name" value="{{ user.company_name }}" class="form-control">
      </div>
      <div class="mb-2">
        <label class="form-label small">ИНН / NIP / Tax ID</label>
        <input type="text" name="tax_id" value="{{ user.tax_id }}" class="form-control">
      </div>
      <div class="mb-2">
        <label class="form-label small">Адрес</label>
        <textarea name="address" class="form-control" rows="2">{{ user.address }}</textarea>
      </div>
      <div class="mb-3">
        <label class="form-label small">Комментарий по выплатам</label>
        <textarea name="payout_note" class="form-control" rows="2">{{ user.payout_note }}</textarea>
      </div>

      <h5 class="card-title mt-3">Документы</h5>
      <div class="mb-2">
        <label class="form-label small">Название документа</label>
        <input type="text" name="doc_label" class="form-control" placeholder="Например: договор, реквизиты">
      </div>
      <div class="mb-3">
        <label class="form-label small">Файл</label>
        <input type="file" name="doc_file" class="form-control">
      </div>

      <button class="btn btn-primary">Сохранить</button>
    </form>
  </div>
  <div class="col-md-6">
    <div class="card p-3 h-100">
      <h5 class="card-title">Мои документы</h5>
      {% if docs %}
        <ul class="list-unstyled small mb-0">
          {% for d in docs %}
            <li class="mb-2">
              <div class="fw-semibold">{{ d.label or 'Документ' }}</div>
              <div class="text-muted">{{ d.uploaded_at.date() if d.uploaded_at else '' }}</div>
              <div class="text-muted"><a href="{{ url_for('partner_doc', doc_id=d.id) }}" target="_blank">{{ d.filename }}</a></div>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p class="small text-muted mb-0">Документы ещё не загружены.</p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}